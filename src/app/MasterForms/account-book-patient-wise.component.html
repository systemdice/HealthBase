<!-- {{asyncPipeFarmacyDeliveryToPatient|json}} -->
<mat-tab-group>
  <mat-tab>
    <ng-template mat-tab-label>
      <mat-icon class="example-tab-icon">thumb_up</mat-icon>
     All Credit Cashbook Report

     
    </ng-template>
    <br/>
    <div>
      <div class="form-row">
       
        <!-- {{asyncPipeFarmacyDeliveryToPatient|json}} -->
        <!-- {{asyncPipeFarmacyDeliveryToPatient|json}} -->
          <div class="form-group col-md-3" style="float:left">
            <h3>Credit Cashbook Details:
              
            </h3>
          </div>
          <div fxFlex>
            <div>
              <mat-form-field >
                <mat-label>Select Store Name:</mat-label>
              <mat-select  (valueChange)="changeValue($event)" >
                <mat-option *ngFor="let catalog of StoreNameCollection" [value]="catalog">{{catalog}}</mat-option>
               </mat-select>
              </mat-form-field> &nbsp;
            </div>
          
        </div>
          <div class="form-group col-md-5" style="float:left">
            <mat-form-field>
              <input matInput (keyup)="applyFilter($event.target.value)"
                placeholder="Filter for (BillingID/Credit or Date)" name="filterVal" [ngModelOptions]="{standalone: true}"
                [(ngModel)]="filterVal">
            </mat-form-field>
            <button type="button" (click)="saveLabTest()" class="btn btn-success"><span class="glyphicon glyphicon-edit"></span>
              Show all Bills</button>&nbsp;
             

              <fieldset class="scheduler-border">
                <legend class="scheduler-border">Date Range Filter:</legend>
              <mat-form-field style="padding-top:0px;">
                <mat-label>Start&nbsp;Date</mat-label>
                <input matInput [matDatepicker]="StartDate1" placeholder="Satrt Date" [(ngModel)]="StartDate"
                readonly (click)="StartDate1.open()" (focus)="StartDate1.open()" >
                <mat-datepicker-toggle matSuffix [for]="StartDate1"></mat-datepicker-toggle>
                <mat-datepicker #StartDate1></mat-datepicker>
              </mat-form-field>
        
            
              &nbsp;&nbsp;
                
                <mat-form-field style="padding-top:0px;">
                  <mat-label>End&nbsp;Date</mat-label>
                  <input matInput [matDatepicker]="EndDate1" placeholder="End Date" [(ngModel)]="EndDate"
                  readonly (click)="EndDate1.open()" (focus)="EndDate1.open()">
                  <mat-datepicker-toggle matSuffix [for]="EndDate1"></mat-datepicker-toggle>
                  <mat-datepicker #EndDate1></mat-datepicker>
                </mat-form-field>&nbsp;&nbsp;
                <button type="button" (click)="ShowDateRangeDate(StartDate,EndDate)" class="btn btn-success"><span
                  class="glyphicon glyphicon-edit"></span>
                Date Range Bills</button>
              </fieldset>
          </div>
         
        </div>
        <!-- <input type="text" name="UserName" class="form-control"  (keyup)="applyFilter($event.target.value)"
              [(ngModel)]="UserName" placeholder="Username" (input)="applyFilter($event.target.value)">
           Filter: {{UserName}} -->
        <hr style="padding:0px;margin:1px;" />
        <div style="display: flex; justify-content: space-around">
          <div></div>
          <div></div>
         <div><h3>Total:&nbsp; {{total| currency :'INR':'symbol':'1.2-2'}} </h3></div>
         </div>


        <div class="example-header">
        
        
          <div class="example-container mat-elevation-z8">
        
            <!-- <button mat-button (click)=(click)="openDialog('Add',{},element.UnqueID,'Add')" mat-flat-button color="primary">Add Row</button> -->
        
            <mat-table [dataSource]="dataSource" matSort #mytable class="my-table mat-elevation-z8"  
              style="background-color:#FFFFFF;border-radius: 2em; border:2px #6D7B8D; padding:5px;width:99%;
              table-layout:fixed;">
            
        
              <ng-container matColumnDef="slno">
                <mat-header-cell *matHeaderCellDef class="HeaderStyle"> Slno  </mat-header-cell>
                <mat-cell *matCellDef="let item; let i = index">  
                  {{ (paginatorRef.pageIndex * paginatorRef.pageSize) + (i + 1) }} </mat-cell>
                
               </ng-container>
        
        
              <!-- Id Column -->
             
                <ng-container matColumnDef="UnqueID" *ngIf="false">
                  <mat-header-cell *matHeaderCellDef mat-sort-header class="HeaderStyle"> UnqueID </mat-header-cell>
                  <mat-cell *matCellDef="let element">
                      <u style="cursor:pointer;color:blue" (click)="addEditExpenseItem(element.CaseID,element.CeditStatus,element.IPDOPDId)">
                        <span class="mobile-label">UniqueID:</span> {{element.UnqueID}} </u>
                    </mat-cell>
                </ng-container>
                

      
                <ng-container matColumnDef="BillNo">
                  <mat-header-cell *matHeaderCellDef class="HeaderStyle"> Bill No. </mat-header-cell>
                  <mat-cell *matCellDef="let element">
                    <span style="color:blue" >
                      <span class="mobile-label">Bill No:</span>{{element.BillNo}} </span>
                   
                  </mat-cell>
          
                </ng-container>
                <ng-container matColumnDef="PharmacyStoreName" >
                  <mat-header-cell *matHeaderCellDef mat-sort-header class="HeaderStyle"> Pharmacy </mat-header-cell>
                  <mat-cell *matCellDef="let element">
                    <span class="mobile-label">Pharma:</span>{{element.PharmacyStoreName}}
                    </mat-cell>
                </ng-container>
                <ng-container matColumnDef="BillingDate">
                  <mat-header-cell *matHeaderCellDef mat-sort-header class="HeaderStyle"> Billing Date </mat-header-cell>
                  <mat-cell *matCellDef="let element"> <span class="mobile-label">Date:</span>{{element.BillingDate| date: 'dd-MM-yyyy'}} </mat-cell>
                </ng-container>
      
                <ng-container matColumnDef="IPDOPDId">
                  <mat-header-cell *matHeaderCellDef mat-sort-header class="HeaderStyle"> Patient ID </mat-header-cell>
                  <mat-cell *matCellDef="let element"> <span class="mobile-label">IP/OP:</span>{{element.IPDOPDId=='Direct'?'NA':element.IPDOPDId}} </mat-cell>
                </ng-container>
                <ng-container matColumnDef="CustomerName">
                  <mat-header-cell *matHeaderCellDef  mat-sort-header class="HeaderStyle"> Billing Name </mat-header-cell>
                  <mat-cell *matCellDef="let element"><span class="mobile-label">Name:</span> {{element.CustomerName}} </mat-cell>
                </ng-container>
              
        
              <ng-container matColumnDef="CeditStatus">
                <mat-header-cell *matHeaderCellDef  mat-sort-header class="HeaderStyle"> Credit Status </mat-header-cell>
                <mat-cell *matCellDef="let element"> <span class="mobile-label">Status:</span>
                    <span *ngIf="element.CeditStatus=='Credit'"
                style="color:red">{{element.CeditStatus}} </span>
                <span *ngIf="element.CeditStatus=='Cash'"
                style="color:Green">{{element.CeditStatus}} </span>
                
                  
                </mat-cell>
              </ng-container>
        
              <ng-container matColumnDef="CaseID" *ngIf="false">
                <mat-header-cell *matHeaderCellDef class="HeaderStyle"> CaseID(Credit)</mat-header-cell>
                <mat-cell *matCellDef="let element">
                 
                  {{element.CaseID}}
                </mat-cell>
        
              </ng-container>
              
              <ng-container matColumnDef="GrossSalePriceOnthisBill">
                <mat-header-cell *matHeaderCellDef mat-sort-header class="HeaderStyle"> Ammount </mat-header-cell>
                <mat-cell *matCellDef="let element"> <span class="mobile-label">Amount:</span>{{(element.GrossSalePriceOnthisBill==null || element.GrossSalePriceOnthisBill=='')?'--':element.GrossSalePriceOnthisBill | currency :'INR':'symbol':'1.2-2'}} </mat-cell>
              </ng-container>
              
        
        
            
        
              <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns;" class="table-row"></mat-row>
            </mat-table>
            <mat-paginator #paginatorRef [pageSizeOptions]="[12, 25, 50, 100]"></mat-paginator>
         
          </div>
        </div>
       
       
     </div>
     <div style="display: flex; justify-content: space-around">
      <div></div>
      <div></div>
     <div><br/><h3>Total:&nbsp; {{total| currency :'INR':'symbol':'1.2-2'}} </h3></div>
   </div>
  </mat-tab>

</mat-tab-group>

  
  <!-- {{asyncPi|json}}
      --------------------------------
  
      {{asyncPipeNewModifyCase|json}} -->
  
  <!-- {{labTestIndividual|json}}
      -----------------------------------------------
      {{asyncPi|json}} -->

    
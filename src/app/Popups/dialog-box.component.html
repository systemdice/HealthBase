<!-- dialog-box.component.html -->
<h3 mat-dialog-title>Current Execution :: <strong>{{action}}</strong></h3>


<div mat-dialog-content>
    <div *ngIf="action != 'Delete'; else elseTemplate">
        <!-- <mat-form-field >
            <input placeholder="{{action}} Name" matInput [(ngModel)]="local_data.Name">
        </mat-form-field>
        <mat-form-field>
            <input placeholder="{{action}} Description" matInput [(ngModel)]="local_data.Description">
        </mat-form-field> -->

        <div class="container" *ngIf="!post; else forminfo">
            <form [formGroup]="formGroup" (ngSubmit)="onSubmit(formGroup.value)" class="form">
                

                <div class="row">
                    <div class="form-group col-xs-6" >
                        <mat-form-field class="form-element">
                            <input matInput placeholder="Name" formControlName="Name">
                        </mat-form-field>
                    </div>
                    <div class="form-group col-xs-6" >
                        <mat-form-field class="form-element">
                            <input matInput placeholder="ShortName" formControlName="ShortName">
                        </mat-form-field>
                    </div>
                    
                </div>




                <div class="row">
                    <div class="form-group col-xs-6" >
                        <mat-form-field class="form-element" matLine>
                            
                                <mat-select formControlName="Category" placeholder="Category*">
                                    <mat-option [value]="choice" *ngFor="let choice of Category">{{ choice }}</mat-option>
                                </mat-select>
                            
                            <!-- <input matInput placeholder="Category" formControlName="Category"> -->
                        </mat-form-field>
                    </div>
                    <div class="form-group col-xs-2" style="padding-top: 15px;" >
                        <button type="button" class="btn btn-default" (click)="removeGroup(2);">
                            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>Add</button>
                    </div>
                    <div class="form-group col-xs-4" >
                        <mat-form-field class="form-element">
                            <input matInput placeholder="Fee" formControlName="Fee">
                        </mat-form-field>
                    </div>
                    
                </div>

                <div class="row">
                    <div class="form-group col-xs-6" >
                        <mat-form-field class="form-element">
                            <input matInput placeholder="Method" formControlName="Method">
                        </mat-form-field>
                    </div>
                    <div class="form-group col-xs-6" >
                        <mat-form-field class="form-element">
                            <input matInput placeholder="Instrument" formControlName="Instrument">
                        </mat-form-field>
                    </div>
                    
                </div>

                <div class="row">
                    
                    <div class="form-group col-xs-9" >
                        <mat-checkbox style="padding-top: 15px;" formControlName="ResultTypeDoc">Result Type Document</mat-checkbox>&nbsp;
                    </div>
                    <div class="form-group col-xs-3" >
                        
                    </div>
                    
                </div>

                <div class="row">
                    <div class="form-group col-xs-12" >
                        <mat-expansion-panel (opened)="panelOpenState = true"
                        (closed)="panelOpenState = false">
     <mat-expansion-panel-header style="height:25px;">
       <mat-panel-title style="height:25px;">
        Important Note:
       </mat-panel-title>
       <!-- <mat-panel-description>
         Currently I am {{panelOpenState ? 'open' : 'closed'}}
       </mat-panel-description> -->
     </mat-expansion-panel-header>
     <div class="row">
        <div class="form-group col-xs-12" >
            <mat-form-field class="form-element">
                <textarea matInput placeholder="Ex. Notes..." formControlName="Notes"></textarea>
              </mat-form-field>
        </div>
        
        
    </div>
    <div class="row">
        <div class="form-group col-xs-12" >
            <mat-form-field class="form-element">
                <textarea matInput placeholder="Ex. Comments..." formControlName="Comments"></textarea>
              </mat-form-field>
        </div>
        
        
    </div>
    <div class="row">
        <div class="form-group col-xs-12" >
            <mat-form-field class="form-element">
                <textarea matInput placeholder="Ex. Interpretation..." formControlName="Interpretation"></textarea>
              </mat-form-field>
        </div>
        
        
    </div>
   </mat-expansion-panel>
                    </div>
                    <div class="form-group col-xs-6" >
                        
                    </div>
                    
                </div>

             

                <div class="row">

                   
                    <div formArrayName="Parameters">
 
                        <div *ngFor="let Parameter of Parameters().controls; let ti=index">
                     
                          <div [formGroupName]="ti"
                            style="border: 1px solid blue; padding: 2px; width: 100%; display: inline-block; margin: 2px;">
                            <button type="button" class="btn btn-default" (click)="addParameter()">
                                <span class="glyphicon glyphicon-plus" style="color:blue;font-weight: bolder;" aria-hidden="true"></span>Add Parameter</button>
                                
                            <div class="row">
                                <div class="form-group col-xs-2" >
                                    <mat-form-field class="form-element">
                                        <input matInput placeholder="Order" name="Order" formControlName="Order">
                                    </mat-form-field>
                                </div>
                                <div class="form-group col-xs-4" >
                                    <mat-form-field class="form-element">
                                        <input matInput placeholder="Name" name="Name" formControlName="Name">
                                    </mat-form-field>
                                </div>

                                <div class="form-group col-xs-4">
                                    <mat-form-field class="form-element" matLine>
                        
                                        <mat-select formControlName="Unit" placeholder="Unit*">
                                            <mat-option [value]="choice" *ngFor="let choice of Category">{{ choice }}</mat-option>
                                        </mat-select>
                                    
                                    <!-- <input matInput placeholder="Category" formControlName="Category"> -->
                                </mat-form-field>
                                </div>
                                <div class="form-group col-xs-2" style="display: flex; justify-content: flex-end" >
                                    <button type="button" class="btn btn-default"  (click)="removeParameter(ti)" style="padding-bottom: 22px;
                                    padding-left: 5px;">
                                        <span class="glyphicon glyphicon-remove" style="color:red;" aria-hidden="true"></span></button>
                                </div>
                                
                            </div>
                            <div class="row">
                                <div class="form-group col-xs-4" >
                                    <mat-form-field class="form-element" matLine>
                        
                                        <mat-select formControlName="InputType" placeholder="InputType*">
                                            <mat-option [value]="choice" *ngFor="let choice of Category">{{ choice }}</mat-option>
                                        </mat-select>
                                </mat-form-field>
                                </div>
                                <div class="form-group col-xs-4" style="padding-left:3px;padding-top: 16px;"  matLine>
                                    <mat-checkbox formControlName="Optional">Optional</mat-checkbox>
                                </div>

                                <div class="form-group col-xs-4" style="padding-left:3px;padding-top: 16px;"  matLine>
                                    <mat-checkbox formControlName="Removed">Removed</mat-checkbox>
                                </div>
                               
                                
                            </div>
                            <button type="button" class="btn btn-default" (click)="addReferenceRange(ti)">
                                <span class="glyphicon glyphicon-plus" style="color:green;" aria-hidden="true"></span>Add Reference</button>
                     
                            <div formArrayName="ReferenceRange">
                     
                              <div *ngFor="let ReferenceRange of ReferenceRangees(ti).controls; let bi=index">
                     
                                <div [formGroupName]="bi" style="border: 1px solid green; padding: 2px; margin: 2px; float:left">
                     
                                  Reference Details :
                                  <button type="button" class="btn btn-default" (click)="addReferenceRange(ti)">
                                    <span class="glyphicon glyphicon-plus" style="color:green;" aria-hidden="true"></span>Add Reference</button>
                                  <div class="row">
                                    <div class="form-group col-xs-2" >
                                        <mat-form-field class="form-element" matLine>
                            
                                            <mat-select formControlName="Gender" placeholder="Gender*">
                                                <mat-option [value]="choice" *ngFor="let choice of Category">{{ choice }}</mat-option>
                                            </mat-select>
                                    </mat-form-field>
                                    </div>
                                    <div class="form-group col-xs-4" >
                                        <mat-form-field class="form-element">
                                            <input matInput placeholder="Minimum Age" name="MinimumAge" formControlName="MinimumAge">
                                        </mat-form-field>
                                    </div>
    
                                    <div class="form-group col-xs-4">
                                        <mat-form-field class="form-element">
                                            <input matInput placeholder="Maximum Age" name="MaximumAge" formControlName="MaximumAge">
                                        </mat-form-field>
                                    </div>
                                    <div class="form-group col-xs-2" style="display: flex; justify-content: flex-end" >
                                        <button type="button" class="btn btn-default"  (click)="removeReferenceRange(ti,bi)" style="padding-bottom: 22px;
                                        padding-left: 5px;">
                                            <span class="glyphicon glyphicon-remove" style="color:red;" aria-hidden="true"></span></button>
                                    </div>
                                    
                                </div>
                                <div class="row">
                                    <div class="form-group col-xs-3" >
                                        <mat-form-field class="form-element">
                                            <input matInput placeholder="Lower Value" name="LowerValue" formControlName="LowerValue">
                                        </mat-form-field>
                                    </div>
                                    <div class="form-group col-xs-3" >
                                        <mat-form-field class="form-element">
                                            <input matInput placeholder="Upper Value" name="UpperValue" formControlName="UpperValue">
                                        </mat-form-field>
                                    </div>
    
                                    <div class="form-group col-xs-4" >
                                        <mat-form-field class="form-element">
                                            <input matInput placeholder="Remarks" name="Remarks" formControlName="Remarks">
                                        </mat-form-field>
                                    </div>
                                   
                                    
                                </div>

                                  
                     
                                 
                     
                                </div>
                     
                              </div>
                     
                            </div>
                     
                          </div>
                     
                        </div>
                     
                      </div>
                     
                      <button type="button" class="btn btn-default" (click)="addParameter()">
                        <span class="glyphicon glyphicon-plus" style="color:blue;" aria-hidden="true" aria-hidden="true"></span>Add Parameter</button>
                    
                    
                        
                </div>

                
            </form>
        </div>

        <ng-template #forminfo>
            <div class="container">
                {{ post | json }}
            </div>
        </ng-template>

    </div>
    <ng-template #elseTemplate>
        Sure to delete <b>{{local_data.name}}</b>?
    </ng-template>
</div>


<hr/>
<div class="row"  style="padding-left:36px;" mat-dialog-actions>
    <div class="form-group col-xs-2">
        <button class="btn btn-success" (click)="doAction(action)"><span class="glyphicon glyphicon-off"></span> {{action}}</button>
        </div>
    <div class="col-md-9">
        <button class="btn btn-success" (click)="closeDialog()" color="warn"> <span class="glyphicon glyphicon-off"></span>Cancel</button>
    </div>
</div>


<!-- {{this.formGroup.value|json}} -->